<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Managing processors • daiR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Managing processors">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-KFVWN0R920"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-KFVWN0R920');
</script>
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">daiR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>

  </a>
</li>
<li>
  <a href="../articles/quickstart.html">Quickstart</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/configuration.html">Configuration</a>
    </li>
    <li>
      <a href="../articles/gcs_storage.html">Working with Google Cloud Storage</a>
    </li>
    <li>
      <a href="../articles/usage.html">Basic usage</a>
    </li>
    <li>
      <a href="../articles/tables.html">Extracting tables</a>
    </li>
    <li>
      <a href="../articles/manage_processors.html">Managing processors</a>
    </li>
    <li>
      <a href="../articles/reconstructing_text.html">Correcting text output</a>
    </li>
    <li>
      <a href="../articles/searchable_pdfs.html">Creating searchable PDFs</a>
    </li>
    <li>
      <a href="../articles/cheatsheet.html">Concept cheatsheet</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/faqs.html">FAQs</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="https://github.com/hegghammer/dair/" class="external-link">
    <span class="fab fa-github"></span>

    Github
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Hegghammer/daiR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Managing processors</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Hegghammer/daiR/blob/HEAD/vignettes/articles/manage_processors.Rmd" class="external-link"><code>vignettes/articles/manage_processors.Rmd</code></a></small>
      <div class="hidden name"><code>manage_processors.Rmd</code></div>

    </div>

    
    
<p><strong>Note: Some of the functions below, notably
<code><a href="../reference/get_ids_by_type.html">get_ids_by_type()</a></code> and <code><a href="../reference/get_versions_by_type.html">get_versions_by_type()</a></code>
are currently only available in the development version of
<code>daiR</code>. Install from Github with
<code>devtools::install_github("hegghammer/daiR")</code> to use
them.</strong></p>
<p>Google Document AI offers a range of different processors, each
optimized for a specific task. For most use cases, the default settings
do the job, but there may be situations when you want to use a specific
processor type or version. This vignette explains how to do that in
<code>daiR</code>.</p>
<p>First, let’s clarify some concepts.</p>
<ul>
<li><p>A processor <em>type</em> is a category of processors, such as
<code>OCR_PROCESSOR</code>. Google keeps adding new types, but you can
find a menu of available processor types at any one time in the official
<a href="https://cloud.google.com/document-ai/docs/processors-list" class="external-link">documentation</a>.
Many of them are designed for very specific types of documents (like the
US tax form “W2”) and are thus not relevant to the average user. At the
current time of writing there are three main generic processor types,
namely, <code>OCR_PROCESSOR</code>, <code>FORM_PARSER_PROCESSOR</code>,
and <code>LAYOUT_PARSER_PROCESSOR</code>.</p></li>
<li><p>A processor <em>version</em> is an instance of a processor type,
reflecting the fact that different instances have finished training at
different points in time. A version can be referenced either by its
<em>full name</em> (aka “Version ID”), such as
<code>pretrained-ocr-v1.0-2020-09-23</code>, or by its <em>alias</em>,
such as <code>stable</code> or <code>rc</code> (“release
candidate”).</p></li>
<li><p>A processor <em>id</em> is the user-specific identifier of a
processor, made up of 16 random characters (for example
<code>3e03a16deqac44a9</code>). When you create a processor for use with
Document AI, that processor gets a unique id. Note that one and the same
processor can be available in multiple versions.</p></li>
</ul>
<p>When you process documents with <code><a href="../reference/dai_sync.html">dai_sync()</a></code> and
<code><a href="../reference/dai_async.html">dai_async()</a></code>, you don’t normally need to specify a
processor, because the functions default to the <code>stable</code>
version of the processor you specified in the environment variable
<code>DAI_PROCESSOR_ID</code> (see the <a href="https://dair.info/articles/configuration.html#step-9-store-the-processor-id-as-an-environment-variable" class="external-link">Configuration
vignette</a>). However, you can use the parameters <code>proc_id</code>
and <code>proc_v</code> to specify a non-default processor type and
version.</p>
<p>To see which processors you have at your disposal at any one time,
you can use the function <code><a href="../reference/get_processors.html">get_processors()</a></code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_processors</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_processors.html">get_processors</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The function returns a dataframe with various metadata for the
available processors. If you run this right after setup and you followed
the <a href="https://dair.info/articles/configuration.html" class="external-link">Configuration
vignette</a>, you should have only one processor (of type
<code>OCR_PROCESSOR</code>), but the dataframe will have several rows;
one for each version.</p>
<p>Now let’s say you wanted to add a processor of the type
<code>FORM_PARSER_PROCESSOR</code>. Then you just need to think of a
display name for that processor and pass it to the function
<code><a href="../reference/create_processor.html">create_processor()</a></code> like so:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## NOT RUN</span></span>
<span><span class="fu"><a href="../reference/create_processor.html">create_processor</a></span><span class="op">(</span><span class="st">"&lt;unique_display_name&gt;"</span>, type <span class="op">=</span> <span class="st">"FORM_PARSER_PROCESSOR"</span><span class="op">)</span></span></code></pre></div>
<p>The function will create a processor and output the id in the
console. But how do you retrieve the id for a processor that you created
some time ago? You can’t run <code><a href="../reference/create_processor.html">create_processor()</a></code> again, as
it would create yet another processor. There are several ways to do
this, but the easiest is with the function
<code><a href="../reference/get_ids_by_type.html">get_ids_by_type()</a></code>. It takes the processor type as its main
argument, for example like this:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_ids_by_type.html">get_ids_by_type</a></span><span class="op">(</span><span class="st">"FORM_PARSER_PROCESSOR"</span><span class="op">)</span></span></code></pre></div>
<p>Assuming you have only one processor of this type, the function will
return an id which you can then pass to
<code><a href="../reference/dai_sync.html">dai_sync()</a></code>/<code><a href="../reference/dai_async.html">dai_async()</a></code> via the
<code>proc_id</code> parameter. If you have more than one processor of
the type in question, it is better to run <code><a href="../reference/get_processors.html">get_processors()</a></code>
and pick the right id from the resulting data frame.</p>
<p>A processor is usually available in more than one version, but the
range of available versions varies from one processor to another. To
find out which versions are available for a given processor, you can use
the function <code><a href="../reference/get_versions_by_type.html">get_versions_by_type()</a></code>, like this:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_versions_by_type.html">get_versions_by_type</a></span><span class="op">(</span><span class="st">"FORM_PARSER_PROCESSOR"</span><span class="op">)</span></span></code></pre></div>
<p>This function will output both the aliases and the full names of the
available versions. Pick the name or alias of the version you want to
use and pass it to <code><a href="../reference/dai_sync.html">dai_sync()</a></code>/<code><a href="../reference/dai_async.html">dai_async()</a></code> with
the <code>proc_v</code> parameter. You can use either an alias (like
<code>rc</code>) or a full name (like
<code>pretrained-ocr-v1.0-2020-09-23</code>).</p>
<p>A sample <code><a href="../reference/dai_sync.html">dai_sync()</a></code> call using a specified processor
might look like this:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## NOT RUN</span></span>
<span><span class="va">resp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dai_sync.html">dai_sync</a></span><span class="op">(</span><span class="st">"document.pdf"</span>, proc_id <span class="op">=</span> <span class="st">"abcdefgh12345678"</span>, proc_v <span class="op">=</span> <span class="st">"rc"</span><span class="op">)</span></span></code></pre></div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Thomas Hegghammer.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
